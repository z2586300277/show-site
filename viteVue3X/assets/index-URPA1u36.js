import{S as G,P,W as y,j as E,aa as B,ab as k,ac as I,T as U}from"./three.module-CVsY17GA.js";import{s as L,t as R,j as W,k as z,l as w,m as T,a as H,d as b,b as X,n as A,g as j,f as q}from"./threeApi-DOkTKUH7.js";import{l as N,T as J}from"./tilesApi-AOxUSWZV.js";import{c as K}from"./GUI-B53Psxen.js";import{d as M,o as Q,e as V,f as Y,g as Z,r as x,x as $,a as D,c as O,_ as ee}from"./index-1scugG01.js";import"./EffectComposer-CXsZCJ3S.js";const te=M({__name:"index",setup(ae){Q(()=>r=S(d.value)),V(()=>r.GUI&&r.GUI.destroy()),Y(()=>{r.GUI.domElement.hidden=!1}),Z(()=>r.GUI.domElement.hidden=!0);const d=x();let r,f=x([]),m=null;$(f.value,e=>A({},e,r.scene));function C(e){const a=j(e),o=q(a,r.camera,r.scene);if(o){const{object:t,face:c,point:p}=o;f.value.push(p)}}function S(e){const a=new G,o=new P(50,e.clientWidth/e.clientHeight,.1,1e5);a.add(o);const t=new y({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0});t.setSize(e.clientWidth,e.clientHeight),t.setPixelRatio(window.devicePixelRatio),t.shadowMap.enabled=!0,t.shadowMap.type=E,t.setClearColor(16119286),e.appendChild(t.domElement);const c=L(o,t);c.addEventListener("change",()=>c.target.y<0?c.target.y=0:!1),m=R(t,o,c,u),m.traverse(n=>n.text="TransformControls"),a.add(m),W(a);const p=z("http://guangfu/channels/floor.jpg");a.add(p);const i=K(U,a,o,c);i.add(t,"outputColorSpace",[B,k,I]).name("色彩空间"),w("http://guangfu/resource/tileset.FBX",n=>{n.rotation.y=-180*Math.PI/180,n.position.set(61.59,-6.1,-58.5);const l=i.addFolder("模型["+Date.now()+"]");["x","y","z"].forEach(s=>l.add(n.position,s).min(-50).max(50).name(s+"轴坐标")),["x","y","z"].forEach(s=>l.add(n.scale,s).min(0).max(10).name(s+"缩放")),a.add(n)}),w("http://guangfu/resource/aroundBuilding.FBX",n=>{b(n).forEach(s=>{s.color.set(16777215*Math.random()),s.transparent=!0,s.opacity=.25});const l=i.addFolder("模型["+Date.now()+"]");["x","y","z"].forEach(s=>l.add(n.position,s).min(-50).max(50).name(s+"轴坐标")),a.add(n)});const h=N(o,t,"http://guangfu/resource/光伏站/tileset.json",n=>a.add(n),e),{Composer:_,outlinePass:v}=T(a,o,t,e),g=H(),F=X(50);u();function u(){F(()=>{h&&J(h),g&&g.update(),r&&r.outlinePass.selectedObjects.length>0?_.render():t.render(a,o)}),d.value&&requestAnimationFrame(u)}return window.onresize=()=>{o.aspect=e.clientWidth/e.clientHeight,o.updateProjectionMatrix(),t.setSize(e.clientWidth,e.clientHeight)},{scene:a,camera:o,renderer:t,controls:c,GUI:i,outlinePass:v}}return(e,a)=>(D(),O("div",{ref_key:"threeDom",ref:d,class:"threeDom",onDblclick:C},null,544))}}),le=ee(te,[["__scopeId","data-v-1c007fe0"]]);export{le as default};
