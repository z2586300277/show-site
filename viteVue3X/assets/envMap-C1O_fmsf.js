import{S as C,P as G,W as S,j as y,o as P,ad as M,B as T,a6 as U,M as I,T as R}from"./three.module-CVsY17GA.js";import{s as b,j as k,A as F,B as H,l as W,a as z,d as A,b as L}from"./threeApi-DOkTKUH7.js";import{c as X}from"./GUI-B53Psxen.js";import{d as j,o as q,e as J,f as K,g as N,r as Q,a as V,c as Y,_ as Z}from"./index-1scugG01.js";import"./EffectComposer-CXsZCJ3S.js";const $=j({__name:"envMap",setup(D){q(()=>i=E(l.value)),J(()=>i.GUI&&i.GUI.destroy()),K(()=>{i.GUI.domElement.hidden=!1}),N(()=>i.GUI.domElement.hidden=!0);const l=Q();let i;function E(t){const n=new C,s=new G(50,t.clientWidth/t.clientHeight,.1,1e5);n.add(s);const e=new S({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0});e.setSize(t.clientWidth,t.clientHeight),e.setPixelRatio(window.devicePixelRatio*1),e.shadowMap.enabled=!0,e.shadowMap.type=y,e.setClearColor(16119286),t.appendChild(e.domElement);const c=b(s,e);c.addEventListener("change",()=>c.target.y<0?c.target.y=0:!1);const m=k(n),p=new P().load("https://img1.baidu.com/it/u=422078137,1307526884&fm=253&app=120&size=w931&n=0&f=JPEG&fmt=auto?sec=1684602000&t=0fca7d998a168e3581f32153d8eb55e7");p.mapping=M;const u=F("/envMap/env.hdr",e);u.mapping=M;const h=H("/envMap/env.exr",e),_=new T(1e3,1e3,1e3),r=new U({color:16777215,map:null});r.needsUpdate=!0;const f=new I(_,r);f.position.set(0,1500,0),n.add(f);const v=X(R,n,s,c);v.add({name:"种类"},"name",["立体","普通单张","hdr单张","exr单张"]).onChange(a=>{g(a)});let d=[];W("http://guangfu/resource/chuankuayue.FBX",a=>{n.add(a),d=A(a),g("普通单张")});function g(a){a==="立体"?(r.envMap=m,d.forEach(o=>o.envMap=m)):a==="普通单张"?(r.envMap=p,d.forEach(o=>o.envMap=p)):a==="hdr单张"?(r.envMap=u,d.forEach(o=>o.envMap=u)):a==="exr单张"&&(r.envMap=h,d.forEach(o=>o.envMap=h))}const x=z(),B=L(50);w();function w(){B(()=>{x&&x.update(),e.render(n,s)}),l.value&&requestAnimationFrame(w)}return window.onresize=()=>{s.aspect=t.clientWidth/t.clientHeight,s.updateProjectionMatrix(),e.setSize(t.clientWidth,t.clientHeight)},{scene:n,camera:s,renderer:e,controls:c,GUI:v}}return(t,n)=>(V(),Y("div",{ref_key:"threeDom",ref:l,class:"threeDom"},null,512))}}),se=Z($,[["__scopeId","data-v-8b7726dc"]]);export{se as default};
