import{S as C,P as G,W as S,y as B,K as P,Q as M,B as T,u as U,M as I,T as R}from"./three.module-B_E_UEtZ.js";import{s as k,a as F,w as H,x as W,l as b,c as z,g as q,d as L}from"./threeApi-CUz88pwB.js";import{c as X}from"./GUI-B53Psxen.js";import{d as A,o as J,q as K,n as Q,p as j,r as N,a as V,c as Y,_ as Z}from"./index-Dq1wBEHm.js";import"./EffectComposer-CZj5rSvA.js";const $=A({__name:"envMap",setup(D){J(()=>i=E(l.value)),K(()=>i.GUI&&i.GUI.destroy()),Q(()=>{i.GUI.domElement.hidden=!1}),j(()=>i.GUI.domElement.hidden=!0);const l=N();let i;function E(t){const n=new C,s=new G(50,t.clientWidth/t.clientHeight,.1,1e5);n.add(s);const e=new S({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0});e.setSize(t.clientWidth,t.clientHeight),e.setPixelRatio(window.devicePixelRatio*1),e.shadowMap.enabled=!0,e.shadowMap.type=B,e.setClearColor(16119286),t.appendChild(e.domElement);const c=k(s,e);c.addEventListener("change",()=>c.target.y<0?c.target.y=0:!1);const m=F(n),p=new P().load("https://img1.baidu.com/it/u=422078137,1307526884&fm=253&app=120&size=w931&n=0&f=JPEG&fmt=auto?sec=1684602000&t=0fca7d998a168e3581f32153d8eb55e7");p.mapping=M;const u=H("/envMap/env.hdr",e);u.mapping=M;const h=W("/envMap/env.exr",e),_=new T(1e3,1e3,1e3),o=new U({color:16777215,map:null});o.needsUpdate=!0;const f=new I(_,o);f.position.set(0,1500,0),n.add(f);const v=X(R,n,s,c);v.add({name:"种类"},"name",["立体","普通单张","hdr单张","exr单张"]).onChange(a=>{g(a)});let d=[];b("http://guangfu/resource/chuankuayue.FBX",a=>{n.add(a),d=q(a),g("普通单张")});function g(a){a==="立体"?(o.envMap=m,d.forEach(r=>r.envMap=m)):a==="普通单张"?(o.envMap=p,d.forEach(r=>r.envMap=p)):a==="hdr单张"?(o.envMap=u,d.forEach(r=>r.envMap=u)):a==="exr单张"&&(o.envMap=h,d.forEach(r=>r.envMap=h))}const x=z(),y=L(50);w();function w(){y(()=>{x&&x.update(),e.render(n,s)}),l.value&&requestAnimationFrame(w)}return window.onresize=()=>{s.aspect=t.clientWidth/t.clientHeight,s.updateProjectionMatrix(),e.setSize(t.clientWidth,t.clientHeight)},{scene:n,camera:s,renderer:e,controls:c,GUI:v}}return(t,n)=>(V(),Y("div",{ref_key:"threeDom",ref:l,class:"threeDom"},null,512))}}),se=Z($,[["__scopeId","data-v-8b7726dc"]]);export{se as default};
