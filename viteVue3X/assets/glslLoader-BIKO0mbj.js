import{S as P,P as E,W as F,A as L,B as H,e as k,M as A,U as M,g as R,V as _,D as T,b as W,T as z}from"./three.module-CVsY17GA.js";import{s as G}from"./threeApi-DOkTKUH7.js";import{c as q}from"./GUI-B53Psxen.js";import{d as I,r as c,o as N,f as j,g as D,e as J,a as p,c as w,b as x,i as y,w as X,F as S,p as Z,h as v,m as $,_ as K}from"./index-1scugG01.js";import"./EffectComposer-CXsZCJ3S.js";const Q={class:"control"},Y=I({__name:"glslLoader",setup(O){let l=null,i=null,s=null;const r=c(),f=c("https://img2.baidu.com/it/u=639935574,2199430260&fm=253&fmt=auto&app=138&f=JPEG?w=658&h=494"),u=c(""),d=c([]);N(async()=>{const t=await C("http://guangfu/shader/");d.value=t.map(e=>({label:e.name,value:`http://guangfu/shader/${e.name}`})),u.value=d.value[0].value,V(r.value)}),j(()=>{s&&(s.domElement.hidden=!1)}),D(()=>{s&&(s.domElement.hidden=!0)}),J(()=>s==null?void 0:s.destroy());async function h(){l={uniforms:M.merge([R.phong.uniforms,{u_resolution:{type:"v2",value:new _(r.value.clientWidth,r.value.clientHeight)},u_time:{type:"f",value:0},u_mouse:{type:"v2",value:new _(0,0)}}]),side:T,vertexShader:`
            varying vec2 vUv;
            void main() {
                vUv = uv;
                vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:await fetch(u.value).then(e=>e.text())},l.fragmentShader=l.fragmentShader.replace(/gl_FragCoord/,"vUv * gl_FragCoord"),l.fragmentShader=l.fragmentShader.replace(/uniform float u_time;/,`
        uniform float u_time;
        varying vec2 vUv;
    `);const t=new W(l);i.material.dispose(),i.material=t}function B(t){const e=[],n=/<a href="([^"]+)">([^<]+)<\/a>\s+(\d{2}-[A-Za-z]{3}-\d{4} \d{2}:\d{2})\s+(\d+)/g;let a;for(;(a=n.exec(t))!==null;)e.push({name:a[2],url:a[1],created:new Date(a[3]),size:parseInt(a[4])});return e}function C(t){const e=new XMLHttpRequest;return e.open("GET",t),e.send(),new Promise((n,a)=>e.onload=()=>{e.status===200?n(B(e.responseText)):a(e.statusText)})}async function V(t){const e=new P,n=new E(50,t.clientWidth/t.clientHeight,.1,1e5);e.add(n);const a=new F({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0});a.setSize(t.clientWidth,t.clientHeight),a.setPixelRatio(window.devicePixelRatio*2),a.setClearColor(0),t.appendChild(a.domElement);const m=G(n,a),o=new L(5500);e.add(o),s=q(z,e,n,m);const b=new H(100,100,100),U=new k({color:16777215});i=new A(b,U),e.add(i),h(),g();function g(){l&&(l.uniforms.u_time.value+=.05),a.render(e,n),r.value&&requestAnimationFrame(g)}}return(t,e)=>{const n=v("el-input"),a=v("el-option"),m=v("el-select");return p(),w(S,null,[x("div",Q,[y(n,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=o=>f.value=o)},null,8,["modelValue"]),y(m,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),class:"m-2",placeholder:"Select",size:"large",onChange:h},{default:X(()=>[(p(!0),w(S,null,Z(d.value,o=>(p(),$(a,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),x("div",{class:"threeBox",ref_key:"threeBox",ref:r},null,512)],64)}}}),le=K(Y,[["__scopeId","data-v-f45f6f3a"]]);export{le as default};
