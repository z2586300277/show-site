import{S as U,P as E,W as F,A as L,B as k,i as H,M as A,f as M,o as R,V as _,p as T,e as W,T as z}from"./three.module-uvJlERpA.js";import{s as G}from"./threeApi-VrTM92mv.js";import{c as q}from"./GUI-B53Psxen.js";import{d as I,l as c,m as N,n as j,p as J,q as X,c as w,f as x,b as y,w as Z,F as S,i as p,o as v,t as $,g as D,k as K}from"./index-TD9Aadbh.js";import"./EffectComposer-OkofIPs6.js";const Q={class:"control"},Y=I({__name:"glslLoader",setup(O){let l=null,i=null,s=null;const r=c(),f=c("https://img2.baidu.com/it/u=639935574,2199430260&fm=253&fmt=auto&app=138&f=JPEG?w=658&h=494"),u=c(""),d=c([]);N(async()=>{const a=await C("http://guangfu/shader/");d.value=a.map(e=>({label:e.name,value:`http://guangfu/shader/${e.name}`})),u.value=d.value[0].value,V(r.value)}),j(()=>{s&&(s.domElement.hidden=!1)}),J(()=>{s&&(s.domElement.hidden=!0)}),X(()=>s==null?void 0:s.destroy());async function h(){l={uniforms:M.merge([R.phong.uniforms,{u_resolution:{type:"v2",value:new _(r.value.clientWidth,r.value.clientHeight)},u_time:{type:"f",value:0},u_mouse:{type:"v2",value:new _(0,0)}}]),side:T,vertexShader:`
            varying vec2 vUv;
            void main() {
                vUv = uv;
                vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:await fetch(u.value).then(e=>e.text())},l.fragmentShader=l.fragmentShader.replace(/gl_FragCoord/,"vUv * gl_FragCoord"),l.fragmentShader=l.fragmentShader.replace(/uniform float u_time;/,`
        uniform float u_time;
        varying vec2 vUv;
    `);const a=new W(l);i.material.dispose(),i.material=a}function B(a){const e=[],n=/<a href="([^"]+)">([^<]+)<\/a>\s+(\d{2}-[A-Za-z]{3}-\d{4} \d{2}:\d{2})\s+(\d+)/g;let t;for(;(t=n.exec(a))!==null;)e.push({name:t[2],url:t[1],created:new Date(t[3]),size:parseInt(t[4])});return e}function C(a){const e=new XMLHttpRequest;return e.open("GET",a),e.send(),new Promise((n,t)=>e.onload=()=>{e.status===200?n(B(e.responseText)):t(e.statusText)})}async function V(a){const e=new U,n=new E(50,a.clientWidth/a.clientHeight,.1,1e5);e.add(n);const t=new F({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0});t.setSize(a.clientWidth,a.clientHeight),t.setPixelRatio(window.devicePixelRatio*2),t.setClearColor(0),a.appendChild(t.domElement);const m=G(n,t),o=new L(5500);e.add(o),s=q(z,e,n,m);const b=new k(100,100,100),P=new H({color:16777215});i=new A(b,P),e.add(i),h(),g();function g(){l&&(l.uniforms.u_time.value+=.05),t.render(e,n),r.value&&requestAnimationFrame(g)}}return(a,e)=>{const n=p("el-input"),t=p("el-option"),m=p("el-select");return v(),w(S,null,[x("div",Q,[y(n,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=o=>f.value=o)},null,8,["modelValue"]),y(m,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),class:"m-2",placeholder:"Select",size:"large",onChange:h},{default:Z(()=>[(v(!0),w(S,null,$(d.value,o=>(v(),D(t,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),x("div",{class:"threeBox",ref_key:"threeBox",ref:r},null,512)],64)}}}),le=K(Y,[["__scopeId","data-v-e1c5e171"]]);export{le as default};
