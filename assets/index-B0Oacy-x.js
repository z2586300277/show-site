import{S as F,P as G,W as P,y as E,z as B,I,J as k,T as U}from"./three.module-uvJlERpA.js";import{s as z,t as L,a as R,f as W,l as w,b as T,c as H,g as X,d as b,e as q,h as A,i as J}from"./threeApi-VrTM92mv.js";import{l as N,T as K}from"./tilesApi-C8a-t_3u.js";import{c as M}from"./GUI-B53Psxen.js";import{d as Q,m as V,q as Y,n as Z,p as $,l as x,x as j,c as D,o as O,k as ee}from"./index-TD9Aadbh.js";import"./EffectComposer-OkofIPs6.js";const te=Q({__name:"index",setup(ae){V(()=>r=S(d.value)),Y(()=>r.GUI&&r.GUI.destroy()),Z(()=>{r.GUI.domElement.hidden=!1}),$(()=>r.GUI.domElement.hidden=!0);const d=x();let r,f=x([]),p=null;j(f.value,e=>q({},e,r.scene));function C(e){const a=A(e),o=J(a,r.camera,r.scene);if(o){const{object:t,face:i,point:m}=o;f.value.push(m)}}function S(e){const a=new F,o=new G(50,e.clientWidth/e.clientHeight,.1,1e5);a.add(o);const t=new P({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0});t.setSize(e.clientWidth,e.clientHeight),t.setPixelRatio(window.devicePixelRatio),t.shadowMap.enabled=!0,t.shadowMap.type=E,t.setClearColor(16119286),e.appendChild(t.domElement);const i=z(o,t);i.addEventListener("change",()=>i.target.y<0?i.target.y=0:!1),p=L(t,o,i,u),p.traverse(n=>n.text="TransformControls"),a.add(p),R(a);const m=W("http://guangfu/channels/floor.jpg");a.add(m);const c=M(U,a,o,i);c.add(t,"outputColorSpace",[B,I,k]).name("色彩空间"),w("http://guangfu/resource/tileset.FBX",n=>{n.rotation.y=-180*Math.PI/180,n.position.set(61.59,-6.1,-58.5);const l=c.addFolder("模型["+Date.now()+"]");["x","y","z"].forEach(s=>l.add(n.position,s).min(-50).max(50).name(s+"轴坐标")),["x","y","z"].forEach(s=>l.add(n.scale,s).min(0).max(10).name(s+"缩放")),a.add(n)}),w("http://guangfu/resource/aroundBuilding.FBX",n=>{X(n).forEach(s=>{s.color.set(16777215*Math.random()),s.transparent=!0,s.opacity=.25});const l=c.addFolder("模型["+Date.now()+"]");["x","y","z"].forEach(s=>l.add(n.position,s).min(-50).max(50).name(s+"轴坐标")),a.add(n)});const h=N(o,t,"http://guangfu/resource/光伏站/tileset.json",n=>a.add(n),e),{Composer:_,outlinePass:v}=T(a,o,t,e),g=H(),y=b(50);u();function u(){y(()=>{h&&K(h),g&&g.update(),r&&r.outlinePass.selectedObjects.length>0?_.render():t.render(a,o)}),d.value&&requestAnimationFrame(u)}return window.onresize=()=>{o.aspect=e.clientWidth/e.clientHeight,o.updateProjectionMatrix(),t.setSize(e.clientWidth,e.clientHeight)},{scene:a,camera:o,renderer:t,controls:i,GUI:c,outlinePass:v}}return(e,a)=>(O(),D("div",{ref_key:"threeDom",ref:d,class:"threeDom",onDblclick:C},null,544))}}),le=ee(te,[["__scopeId","data-v-1c007fe0"]]);export{le as default};
