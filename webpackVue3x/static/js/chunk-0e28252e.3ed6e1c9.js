(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e28252e"],{"1c77":function(e,t,o){"use strict";o.r(t);o("2b12");var n=o("c553"),r=o("2745");const c=new r["Euler"](0,0,0,"YXZ"),i=new r["Vector3"],a={type:"change"},s={type:"lock"},m={type:"unlock"},d=Math.PI/2;class l extends r["EventDispatcher"]{constructor(e,t){super(),void 0===t&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),t=document.body),this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1;const o=this;function n(t){if(!1===o.isLocked)return;const n=t.movementX||t.mozMovementX||t.webkitMovementX||0,r=t.movementY||t.mozMovementY||t.webkitMovementY||0;c.setFromQuaternion(e.quaternion),c.y-=.002*n*o.pointerSpeed,c.x-=.002*r*o.pointerSpeed,c.x=Math.max(d-o.maxPolarAngle,Math.min(d-o.minPolarAngle,c.x)),e.quaternion.setFromEuler(c),o.dispatchEvent(a)}function l(){o.domElement.ownerDocument.pointerLockElement===o.domElement?(o.dispatchEvent(s),o.isLocked=!0):(o.dispatchEvent(m),o.isLocked=!1)}function u(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}this.connect=function(){o.domElement.ownerDocument.addEventListener("mousemove",n),o.domElement.ownerDocument.addEventListener("pointerlockchange",l),o.domElement.ownerDocument.addEventListener("pointerlockerror",u)},this.disconnect=function(){o.domElement.ownerDocument.removeEventListener("mousemove",n),o.domElement.ownerDocument.removeEventListener("pointerlockchange",l),o.domElement.ownerDocument.removeEventListener("pointerlockerror",u)},this.dispose=function(){this.disconnect()},this.getObject=function(){return e},this.getDirection=function(){const t=new r["Vector3"](0,0,-1);return function(o){return o.copy(t).applyQuaternion(e.quaternion)}}(),this.moveForward=function(t){i.setFromMatrixColumn(e.matrix,0),i.crossVectors(e.up,i),e.position.addScaledVector(i,t)},this.moveRight=function(t){i.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(i,t)},this.lock=function(){this.domElement.requestPointerLock()},this.unlock=function(){o.domElement.ownerDocument.exitPointerLock()},this.connect()}}const u={class:"mapControl",draggable:"true"};var h={__name:"GoThree1",setup(e){let t,o,c,i;const a=[];let s,m=!1,d=!1,h=!1,p=!1,w=!1,b=performance.now();const f=new r["Vector3"],k=new r["Vector3"],v=new r["Vector3"],y=new r["Color"],g=Object(n["ref"])(null),E=()=>o.lock();function M(e){i=new r["PerspectiveCamera"](75,e.clientWidth/e.clientHeight,1,1e3),i.position.y=10,c=new r["Scene"],c.background=new r["Color"](16777215),c.fog=new r["Fog"](16777215,0,750);const n=new r["HemisphereLight"](15658751,7829384,.75);n.position.set(.5,1,.75),c.add(n),t=new r["WebGLRenderer"]({antialias:!0}),t.setPixelRatio(window.devicePixelRatio),t.setSize(e.clientWidth,e.clientHeight),e.appendChild(t.domElement);const u=new r["AxesHelper"](500);c.add(u),o=new l(i,e),c.add(o.getObject());const b=function(e){switch(e.code){case"ArrowUp":case"KeyW":m=!0;break;case"ArrowLeft":case"KeyA":h=!0;break;case"ArrowDown":case"KeyS":d=!0;break;case"ArrowRight":case"KeyD":p=!0;break;case"Space":!0===w&&(f.y+=350),w=!1;break}},k=function(e){switch(e.code){case"ArrowUp":case"KeyW":m=!1;break;case"ArrowLeft":case"KeyA":h=!1;break;case"ArrowDown":case"KeyS":d=!1;break;case"ArrowRight":case"KeyD":p=!1;break}};document.addEventListener("keydown",b),document.addEventListener("keyup",k),s=new r["Raycaster"](new r["Vector3"],new r["Vector3"](0,-1,0),0,10);let g=new r["PlaneGeometry"](2e3,2e3,100,100);g.rotateX(-Math.PI/2);let E=g.attributes.position;for(let t=0,o=E.count;t<o;t++)v.fromBufferAttribute(E,t),v.x+=20*Math.random()-10,v.y+=2*Math.random(),v.z+=20*Math.random()-10,E.setXYZ(t,v.x,v.y,v.z);g=g.toNonIndexed(),E=g.attributes.position;const M=[];for(let t=0,o=E.count;t<o;t++)y.setHSL(.3*Math.random()+.5,.75,.25*Math.random()+.75),M.push(y.r,y.g,y.b);g.setAttribute("color",new r["Float32BufferAttribute"](M,3));const x=new r["MeshBasicMaterial"]({vertexColors:!0}),L=new r["Mesh"](g,x);c.add(L);const A=new r["BoxGeometry"](20,20,20).toNonIndexed();E=A.attributes.position;const j=[];for(let t=0,o=E.count;t<o;t++)y.setHSL(.3*Math.random()+.5,.75,.25*Math.random()+.75),j.push(y.r,y.g,y.b);A.setAttribute("color",new r["Float32BufferAttribute"](j,3));for(let t=0;t<500;t++){const e=new r["MeshPhongMaterial"]({specular:16777215,flatShading:!0,vertexColors:!0});e.color.setHSL(.2*Math.random()+.5,.75,.25*Math.random()+.75);const t=new r["Mesh"](A,e);t.position.x=20*Math.floor(20*Math.random()-10),t.position.y=20*Math.floor(20*Math.random())+10,t.position.z=20*Math.floor(20*Math.random()-10),c.add(t),a.push(t)}}function x(){requestAnimationFrame(x);const e=performance.now();if(!0===o.isLocked){s.ray.origin.copy(o.getObject().position),s.ray.origin.y-=10;const t=s.intersectObjects(a,!1),n=t.length>0,r=(e-b)/1e3;f.x-=10*f.x*r,f.z-=10*f.z*r,f.y-=9.8*100*r,k.z=Number(m)-Number(d),k.x=Number(p)-Number(h),k.normalize(),(m||d)&&(f.z-=400*k.z*r),(h||p)&&(f.x-=400*k.x*r),!0===n&&(console.log(t),f.y=Math.max(0,f.y),w=!0),o.moveRight(-f.x*r),o.moveForward(-f.z*r),o.getObject().position.y+=f.y*r,o.getObject().position.y<10&&(f.y=0,o.getObject().position.y=10,w=!0)}b=e,t.render(c,i)}return Object(n["onMounted"])(()=>{M(g.value),x()}),(e,t)=>{const o=Object(n["resolveComponent"])("el-button"),r=Object(n["resolveDirective"])("drag");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",u,[Object(n["createVNode"])(o,{type:"primary",onClick:E},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("开始")]),_:1})])),[[r]]),Object(n["createElementVNode"])("div",{class:"threeDom",ref_key:"T_Dom",ref:g},null,512)],64)}}},p=(o("51ef"),o("6b78")),w=o.n(p);const b=w()(h,[["__scopeId","data-v-0174246e"]]);t["default"]=b},"2abb":function(e,t,o){},"51ef":function(e,t,o){"use strict";o("2abb")}}]);