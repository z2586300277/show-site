(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ed8b658"],{1563:function(e,t,n){"use strict";function r(e){let t;if(t=e instanceof DataView?e:new DataView(e),"{"===String.fromCharCode(t.getUint8(0)))return null;let n="";for(let r=0;r<4;r++)n+=String.fromCharCode(t.getUint8(r));return n}n.d(t,"a",(function(){return r}))},"2895a":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n("467b");class a{constructor(e,t,n,a){this.buffer=e,this.binOffset=t+n,this.binLength=a;let i=null;if(0!==n){const a=new Uint8Array(e,t,n);i=JSON.parse(Object(r["a"])(a))}else i={};this.header=i}getKeys(){return Object.keys(this.header)}getData(e,t,n=null,r=null){const a=this.header;if(!(e in a))return null;const i=a[e];if(i instanceof Object){if(Array.isArray(i))return i;{const{buffer:a,binOffset:s,binLength:o}=this,c=i.byteOffset||0,d=i.type||r,l=i.componentType||n;if("type"in i&&r&&i.type!==r)throw new Error("FeatureTable: Specified type does not match expected type.");let u,h;switch(d){case"SCALAR":u=1;break;case"VEC2":u=2;break;case"VEC3":u=3;break;case"VEC4":u=4;break;default:throw new Error(`FeatureTable : Feature type not provided for "${e}".`)}const f=s+c,w=t*u;switch(l){case"BYTE":h=new Int8Array(a,f,w);break;case"UNSIGNED_BYTE":h=new Uint8Array(a,f,w);break;case"SHORT":h=new Int16Array(a,f,w);break;case"UNSIGNED_SHORT":h=new Uint16Array(a,f,w);break;case"INT":h=new Int32Array(a,f,w);break;case"UNSIGNED_INT":h=new Uint32Array(a,f,w);break;case"FLOAT":h=new Float32Array(a,f,w);break;case"DOUBLE":h=new Float64Array(a,f,w);break;default:throw new Error(`FeatureTable : Feature component type not provided for "${e}".`)}const b=f+w*h.BYTES_PER_ELEMENT;if(b>s+o)throw new Error("FeatureTable: Feature data read outside binary body length.");return h}}return i}}class i extends a{constructor(e,t,n,r,a){super(e,n,r,a),this.batchSize=t}getData(e,t=null,n=null){return super.getData(e,this.batchSize,t,n)}}},"467b":function(e,t,n){"use strict";function r(e){const t=new TextDecoder;return t.decode(e)}n.d(t,"a",(function(){return r}))},"8c75":function(e,t,n){},a075:function(e,t,n){"use strict";n.r(t);var r=n("c553"),a=n("bbd2"),i=n("2745"),s=n("3d4c"),o={__name:"3dtilesPlugin1",setup(e){let t,n,o,c,d,l,u,h,f,w,b=Object(r["ref"])();function p(e){const t={...e};return t.uniforms={highlightedBatchId:{value:-1},myOpacity:.1,highlightColor:{value:new i["Color"](1193046).convertSRGBToLinear()},...i["UniformsUtils"].clone(e.uniforms)},t.uniforms.opacity.value=.1,console.log(t.uniforms),t.extensions={derivatives:!0},t.lights=!0,t.vertexShader="\n\t\t\tattribute float _batchid;\n\t\t\tvarying float batchid;\n\t\t"+t.vertexShader.replace(/#include <uv_vertex>/,"\n\t\t\t#include <uv_vertex>\n\t\t\tbatchid = _batchid;\n\t\t\t"),t.fragmentShader="\n\t\t\tvarying float batchid;\n\t\t\tuniform float highlightedBatchId;\n\t\t\tuniform float myOpacity;\n\t\t\tuniform vec3 highlightColor;\n\t\t"+t.fragmentShader.replace(/vec4 diffuseColor = vec4\( diffuse, opacity \);/,"\n\t\t\tvec4 diffuseColor =\n\t\t\t\tabs( batchid - highlightedBatchId ) < 0.5 ?\n\t\t\t\tvec4( highlightColor, 0.1 ) :\n\t\t\t\tvec4( diffuse, 0.1 );\n\t\t\t"),t}function g(){w=document.getElementById("info"),o=new i["Scene"],c=new i["WebGLRenderer"]({antialias:!0}),c.setPixelRatio(window.devicePixelRatio),c.setSize(window.innerWidth,window.innerHeight),c.setClearColor(1383455),c.shadowMap.enabled=!0,c.shadowMap.type=i["PCFSoftShadowMap"],c.outputEncoding=i["sRGBEncoding"],b.value.appendChild(c.domElement),t=new i["PerspectiveCamera"](60,window.innerWidth/window.innerHeight,1,4e3),t.position.set(400,400,400),n=new s["a"](t,c.domElement),n.screenSpacePanning=!1,n.minDistance=1,n.maxDistance=2e3,l=new i["DirectionalLight"](16777215,1.25),l.position.set(1,2,3).multiplyScalar(40),l.castShadow=!0,l.shadow.bias=-.01,l.shadow.mapSize.setScalar(2048);const e=l.shadow.camera;e.left=-200,e.bottom=-200,e.right=200,e.top=200,e.updateProjectionMatrix(),o.add(l);const r=new i["AmbientLight"](16777215,.05);o.add(r),d=new i["Group"],o.add(d),(new a["a"]).load("/3dtiles/lr.b3dm").then(e=>{f=e.scene,d.add(f);const t=new i["Box3"];t.setFromObject(f),t.getCenter(d.position).multiplyScalar(-1),f.traverse(e=>{e.isMesh&&(e.material=new i["ShaderMaterial"](p(i["ShaderLib"].standard)))})}),u=new i["Raycaster"],h=new i["Vector2"],m(),window.addEventListener("resize",m,!1)}function m(){t.aspect=window.innerWidth/window.innerHeight,c.setPixelRatio(window.devicePixelRatio),c.setSize(window.innerWidth,window.innerHeight),t.updateProjectionMatrix()}function y(){requestAnimationFrame(y),v()}function v(){c.render(o,t)}return Object(r["onMounted"])(()=>{g(),y()}),(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"randerDom",ref_key:"renderDom",ref:b,id:"info"},null,512))}},c=(n("ef59"),n("6b78")),d=n.n(c);const l=d()(o,[["__scopeId","data-v-50cadf29"]]);t["default"]=l},bbd2:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("2895a"),a=n("d109"),i=n("1563");class s extends a["a"]{parse(e){const t=new DataView(e),n=Object(i["a"])(t);console.assert("b3dm"===n);const a=t.getUint32(4,!0);console.assert(1===a);const s=t.getUint32(8,!0);console.assert(s===e.byteLength);const o=t.getUint32(12,!0),c=t.getUint32(16,!0),d=t.getUint32(20,!0),l=t.getUint32(24,!0),u=28,h=e.slice(u,u+o+c),f=new r["b"](h,0,o,c),w=u+o+c,b=e.slice(w,w+d+l),p=new r["a"](b,f.getData("BATCH_LENGTH"),0,d,l),g=w+d+l,m=new Uint8Array(e,g,s-g);return{version:a,featureTable:f,batchTable:p,glbBytes:m}}}var o=n("2745"),c=n("37f3");class d extends s{constructor(e=o["DefaultLoadingManager"]){super(),this.manager=e,this.adjustmentTransform=new o["Matrix4"]}parse(e){const t=super.parse(e),n=t.glbBytes.slice().buffer;return new Promise((e,r)=>{const a=this.manager,i=this.fetchOptions,s=a.getHandler("path.gltf")||new c["a"](a);"include"===i.credentials&&"cors"===i.mode&&s.setCrossOrigin("use-credentials"),"credentials"in i&&s.setWithCredentials("include"===i.credentials),i.headers&&s.setRequestHeader(i.headers);let o=this.workingPath;!/[\\/]$/.test(o)&&o.length&&(o+="/");const d=this.adjustmentTransform;s.parse(n,o,n=>{const{batchTable:r,featureTable:a}=t,{scene:i}=n,s=a.getData("RTC_CENTER");s&&(i.position.x+=s[0],i.position.y+=s[1],i.position.z+=s[2]),n.scene.updateMatrix(),n.scene.matrix.multiply(d),n.scene.matrix.decompose(n.scene.position,n.scene.quaternion,n.scene.scale),n.batchTable=r,n.featureTable=a,i.batchTable=r,i.featureTable=a,e(n)},r)})}}},d109:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(){this.fetchOptions={},this.workingPath=""}load(e){return fetch(e,this.fetchOptions).then(t=>{if(!t.ok)throw new Error(`Failed to load file "${e}" with status ${t.status} : ${t.statusText}`);return t.arrayBuffer()}).then(t=>(""===this.workingPath&&(this.workingPath=this.workingPathForURL(e)),this.parse(t)))}resolveExternalURL(e){return/^[^\\/]/.test(e)?this.workingPath+"/"+e:e}workingPathForURL(e){const t=e.split(/[\\/]/g);t.pop();const n=t.join("/");return n+"/"}parse(e){throw new Error("LoaderBase: Parse not implemented.")}}},ef59:function(e,t,n){"use strict";n("8c75")}}]);